<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Crypto Congruence - Aristides Mens</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
<style>
:root{--primary:#0a0c1b;--secondary:#141632;--accent:#6a4dff;--accent-hover:#7d64ff;--accent2:#ff4df2;--accent2-hover:#ff6df4;--text:#e6e6ff;--border:#3a3c5a;--error:#ff4d7a;--success:#4dffb8;--warning:#ffd24d;--card-bg:rgba(20,22,50,0.7)}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}
body{background:linear-gradient(135deg,#0a0c1b,#1a1c3a,#2a2c5a);min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px;color:var(--text)}
.container{width:100%;max-width:980px;background:var(--secondary);border-radius:20px;box-shadow:0 15px 35px rgba(0,0,0,0.5);overflow:hidden;border:1px solid var(--border);position:relative}
.container::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle, rgba(106,77,255,0.1) 0%, transparent 70%);transform:rotate(30deg);z-index:0}
header{background:rgba(10,12,27,0.8);padding:25px;text-align:center;border-bottom:1px solid var(--border);position:relative;z-index:1;backdrop-filter:blur(5px)}
h1{font-size:2.8rem;letter-spacing:1px;font-weight:700;padding:10px 0;background:linear-gradient(90deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 20px rgba(106,77,255,0.3)}
.language-container{margin:15px auto;text-align:center}
.lang-select{background:rgba(10,12,27,0.6);color:var(--text);border:1px solid var(--accent);border-radius:8px;padding:8px 15px;font-size:1rem;cursor:pointer;outline:none;transition:all 0.3s ease;width:260px}
.lang-select:hover{border-color:var(--accent2);box-shadow:0 0 10px rgba(255,77,242,0.3)}
.main-content{padding:30px;position:relative;z-index:1}
.card{background:var(--card-bg);border-radius:16px;padding:25px;margin-bottom:25px;border:1px solid var(--border);backdrop-filter:blur(5px);box-shadow:0 8px 20px rgba(0,0,0,0.2)}
label{display:block;margin-bottom:12px;font-weight:600;color:#a0a0ff;font-size:1.1rem}
input,textarea{width:100%;padding:16px 20px;border-radius:12px;border:1px solid var(--border);background:rgba(10,12,27,0.6);color:var(--text);font-size:1.1rem;outline:none;transition:all 0.3s ease;backdrop-filter:blur(5px)}
input:focus,textarea:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(106,77,255,0.3)}
.btn{display:inline-block;padding:16px 32px;border:none;border-radius:12px;color:white;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;text-align:center;text-decoration:none;position:relative;overflow:hidden;z-index:1;outline:none !important}
.btn::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent2));z-index:-1;transition:all 0.4s ease}
.btn:hover{transform:translateY(-3px);box-shadow:0 10px 25px rgba(106,77,255,0.4)}
.btn:active,.btn:focus{transform:translateY(0)}
.btn-block{display:block;width:100%}
.btn-secondary{background:transparent;border:1px solid var(--border);color:#a0a0ff}
.btn-secondary::before{background:rgba(20,22,50,0.8)}
.btn-secondary:hover{border-color:var(--accent2);box-shadow:0 10px 25px rgba(255,77,242,0.3)}
.result-box{background:rgba(10,12,27,0.6);border:1px solid var(--border);border-radius:12px;padding:20px;min-height:140px;color:var(--text);font-size:1.2rem;word-break:break-word;overflow-y:auto;max-height:250px;line-height:1.6;backdrop-filter:blur(5px);box-shadow:inset 0 0 15px rgba(0,0,0,0.2)}
.buttons{display:flex;gap:15px;margin-top:20px;margin-bottom:25px}
.flex-1{flex:1}
.hidden{display:none}
.copy-btn{margin-top:20px;background:transparent;border:1px solid var(--accent2);color:var(--accent2)}
.copy-btn::before{background:rgba(255,77,242,0.1)}
.copy-btn:hover{box-shadow:0 5px 20px rgba(255,77,242,0.3)}
.status{padding:12px;border-radius:8px;margin-top:15px;text-align:center;font-weight:600;background:rgba(10,12,27,0.7);border:1px solid var(--border);backdrop-filter:blur(5px)}
.status.success{border-color:var(--success);color:var(--success)}
.status.error{border-color:var(--error);color:var(--error)}
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(10,12,27,0.95);display:flex;justify-content:center;align-items:center;z-index:2000}
.modal-content{background:var(--secondary);width:90%;max-width:600px;border-radius:20px;padding:30px;border:1px solid var(--border);position:relative;overflow:hidden;box-shadow:0 20px 50px rgba(0,0,0,0.5)}
.modal-content::before{content:'';position:absolute;top:-50px;right:-50px;width:200px;height:200px;border-radius:50%;background:radial-gradient(circle,var(--accent),transparent 70%);opacity:0.2}
.modal h2{text-align:center;margin-bottom:20px;font-size:1.8rem;background:linear-gradient(90deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.modal p{color:var(--text);font-size:1.1rem;line-height:1.6;margin-bottom:25px;text-align:center}
.modal-actions{display:flex;justify-content:space-between;align-items:center}
.dont-show{display:flex;align-items:center;gap:10px;color:#a0a0ff;font-size:1rem}
.modal-ok{padding:12px 30px;background:linear-gradient(90deg,var(--accent),var(--accent2));color:white;border:none;border-radius:10px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;outline:none !important}
.modal-ok:hover{transform:translateY(-3px);box-shadow:0 10px 25px rgba(106,77,255,0.4)}
.password-strength{height:6px;border-radius:3px;margin-top:10px;background:var(--border);overflow:hidden}
.password-strength-fill{height:100%;width:0%;transition:width 0.3s ease;background:linear-gradient(90deg,var(--error),var(--warning),var(--success))}
.crypto-animation{position:absolute;bottom:0;left:0;width:100%;height:100px;background:linear-gradient(transparent, rgba(106,77,255,0.05));z-index:0}
@media (max-width:768px){.buttons{flex-direction:column}h1{font-size:2.2rem}.main-content{padding:20px}.modal-content{padding:20px}.modal-actions{flex-direction:column;gap:15px}}
</style>
</head>
<body>
<div id="instructionModal" class="modal">
<div class="modal-content">
<h2 id="modalTitle">Comment utiliser ce logiciel</h2>
<div style="text-align:center;margin-bottom:12px;">
<select id="modalLangSelect" class="lang-select" aria-label="Language for instructions"></select>
</div>
<p id="modalText">Pour utiliser ce logiciel, commencez par saisir un mot de passe secret à partager avec votre destinataire. Entrez ensuite le message à crypter, copiez le message crypté, puis envoyez-le avec le mot de passe afin que votre destinataire puisse le décrypter.</p>
<div class="modal-actions">
<label class="dont-show">
<input type="checkbox" id="dontShowAgain"/>
<span id="dontShowLabel">Ne plus afficher ce message</span>
</label>
<button class="modal-ok" id="modalOk">Compris</button>
</div>
</div>
</div>
<div class="container">
<div class="crypto-animation"></div>
<header>
<h1 id="appTitle">ARISTIDES_MENS</h1>
<div class="language-container">
<select id="langSelect" class="lang-select" aria-label="App language"></select>
</div>
</header>
<div id="page1" class="main-content">
<div class="card">
<label for="password" id="passwordLabel">Mot de passe secret</label>
<input type="password" id="password" placeholder="Entrez votre mot de passe ici" autocomplete="off"/>
<div class="password-strength">
<div class="password-strength-fill" id="passwordStrength"></div>
</div>
<div id="passwordHint" style="margin-top:10px;font-size:0.9rem;color:#a0a0ff;">Utilisez un mot de passe avec des lettres et chiffres pour une sécurité optimale</div>
</div>
<button id="continueBtn" class="btn btn-block">Continuer vers le cryptage</button>
</div>
<div id="page2" class="main-content hidden">
<div class="card">
<label for="message" id="messageLabel">Message à crypter/décrypter</label>
<textarea id="message" placeholder="Entrez votre message ici" rows="4"></textarea>
</div>
<div class="buttons">
<button id="encodeBtn" class="btn flex-1">
<i class="fas fa-lock"></i> <span id="encodeLabel">Crypter</span>
</button>
<button id="decodeBtn" class="btn flex-1">
<i class="fas fa-lock-open"></i> <span id="decodeLabel">Décrypter</span>
</button>
</div>
<div class="card">
<label id="resultLabel">Résultat</label>
<div class="result-box" id="result"></div>
<button id="copyBtn" class="btn copy-btn">
<i class="fas fa-copy"></i> <span id="copyLabel">Copier le résultat</span>
</button>
<div id="status" class="status"></div>
</div>
<button id="backBtn" class="btn btn-secondary btn-block">
<i class="fas fa-arrow-left"></i> <span id="backLabel">Retour au mot de passe</span>
</button>
</div>
</div>
<script>
const translations = {
  "fr": {
    "appTitle": "ARISTIDES_MENS",
    "modalTitle": "Comment utiliser ce logiciel",
    "modalText": "Pour utiliser ce logiciel, commencez par saisir un mot de passe secret à partager avec votre destinataire. Entrez ensuite le message à crypter, copiez le message crypté, puis envoyez-le avec le mot de passe afin que votre destinataire puisse le décrypter.",
    "dontShowLabel": "Ne plus afficher ce message",
    "modalOk": "Compris",
    "passwordLabel": "Mot de passe secret",
    "passwordPlaceholder": "Entrez votre mot de passe ici",
    "continueBtn": "Continuer vers le cryptage",
    "messageLabel": "Message à crypter/décrypter",
    "messagePlaceholder": "Entrez votre message ici",
    "resultLabel": "Résultat",
    "copyLabel": "Copier le résultat",
    "encodeLabel": "Crypter",
    "decodeLabel": "Décrypter",
    "backLabel": "Retour au mot de passe",
    "statusCopied": "Texte copié avec succès!",
    "statusEncoded": "Message crypté avec succès!",
    "statusDecoded": "Message décrypté avec succès!",
    "statusPasswordRequired": "Veuillez entrer un mot de passe",
    "statusMessageRequired": "Veuillez entrer un message",
    "passwordHint": "Utilisez un mot de passe avec des lettres et chiffres pour une sécurité optimale"
  },
  "en": {
    "appTitle": "ARISTIDES_MENS",
    "modalTitle": "How to use this software",
    "modalText": "To use this software, start by entering a secret password to share with your recipient. Then enter the message to encrypt, copy the encrypted message, and send it with the password so your recipient can decrypt it.",
    "dontShowLabel": "Don't show this message again",
    "modalOk": "Got it",
    "passwordLabel": "Secret password",
    "passwordPlaceholder": "Enter your password here",
    "continueBtn": "Continue to encryption",
    "messageLabel": "Message to encrypt/decrypt",
    "messagePlaceholder": "Enter your message here",
    "resultLabel": "Result",
    "copyLabel": "Copy result",
    "encodeLabel": "Encrypt",
    "decodeLabel": "Decrypt",
    "backLabel": "Back to password",
    "statusCopied": "Text copied successfully!",
    "statusEncoded": "Message encrypted successfully!",
    "statusDecoded": "Message decrypted successfully!",
    "statusPasswordRequired": "Please enter a password",
    "statusMessageRequired": "Please enter a message",
    "passwordHint": "Use a password with letters and numbers for optimal security"
  },
  "es": {
    "appTitle": "ARISTIDES_MENS",
    "modalTitle": "Cómo utilizar este software",
    "modalText": "Para usar este software, comience ingresando una contraseña secreta para compartir con su destinatario. Luego ingrese el mensaje a encriptar, copie el mensaje encriptado y envíelo con la contraseña para que su destinatario pueda desencriptarlo.",
    "dontShowLabel": "No mostrar este mensaje nuevamente",
    "modalOk": "Entendido",
    "passwordLabel": "Contraseña secreta",
    "passwordPlaceholder": "Ingrese su contraseña aquí",
    "continueBtn": "Continuar al cifrado",
    "messageLabel": "Mensaje para cifrar/descifrar",
    "messagePlaceholder": "Ingrese su mensaje aquí",
    "resultLabel": "Resultado",
    "copyLabel": "Copiar resultado",
    "encodeLabel": "Cifrar",
    "decodeLabel": "Descifrar",
    "backLabel": "Volver a la contraseña",
    "statusCopied": "¡Texto copiado con éxito!",
    "statusEncoded": "¡Mensaje cifrado con éxito!",
    "statusDecoded": "¡Mensaje descifrado con éxito!",
    "statusPasswordRequired": "Por favor ingrese una contraseña",
    "statusMessageRequired": "Por favor ingrese un mensaje",
    "passwordHint": "Use una contraseña con letras y números para una seguridad óptima"
  },
  "de": {
    "appTitle": "ARISTIDES_MENS",
    "modalTitle": "So verwenden Sie diese Software",
    "modalText": "Um diese Software zu verwenden, geben Sie zunächst ein geheimes Passwort ein, das Sie mit Ihrem Empfänger teilen können. Geben Sie dann die zu verschlüsselnde Nachricht ein, kopieren Sie die verschlüsselte Nachricht und senden Sie sie mit dem Passwort, damit Ihr Empfänger sie entschlüsseln kann.",
    "dontShowLabel": "Diese Nachricht nicht mehr anzeigen",
    "modalOk": "Verstanden",
    "passwordLabel": "Geheimes Passwort",
    "passwordPlaceholder": "Geben Sie hier Ihr Passwort ein",
    "continueBtn": "Zur Verschlüsselung fortfahren",
    "messageLabel": "Zu verschlüsselnde/entschlüsselnde Nachricht",
    "messagePlaceholder": "Geben Sie hier Ihre Nachricht ein",
    "resultLabel": "Ergebnis",
    "copyLabel": "Ergebnis kopieren",
    "encodeLabel": "Verschlüsseln",
    "decodeLabel": "Entschlüsseln",
    "backLabel": "Zurück zum Passwort",
    "statusCopied": "Text erfolgreich kopiert!",
    "statusEncoded": "Nachricht erfolgreich verschlüsselt!",
    "statusDecoded": "Nachricht erfolgreich entschlüsselt!",
    "statusPasswordRequired": "Bitte geben Sie ein Passwort ein",
    "statusMessageRequired": "Bitte geben Sie eine Nachricht ein",
    "passwordHint": "Verwenden Sie ein Passwort mit Buchstaben und Zahlen für optimale Sicherheit"
  },
  "it": {
    "appTitle": "ARISTIDES_MENS",
    "modalTitle": "Come utilizzare questo software",
    "modalText": "Per utilizzare questo software, inizia inserendo una password segreta da condividere con il tuo destinatario. Quindi inserisci il messaggio da crittografare, copia il messaggio crittografato e invialo con la password in modo che il tuo destinatario possa decrittografarlo.",
    "dontShowLabel": "Non mostrare più questo messaggio",
    "modalOk": "Capito",
    "passwordLabel": "Password segreta",
    "passwordPlaceholder": "Inserisci la tua password qui",
    "continueBtn": "Continua alla crittografia",
    "messageLabel": "Messaggio da crittografare/decrittografare",
    "messagePlaceholder": "Inserisci il tuo messaggio aquí",
    "resultLabel": "Risultato",
    "copyLabel": "Copia risultato",
    "encodeLabel": "Crittografa",
    "decodeLabel": "Decrittografa",
    "backLabel": "Torna alla password",
    "statusCopied": "Testo copiato con successo!",
    "statusEncoded": "Messaggio crittografato con successo!",
    "statusDecoded": "Messaggio decrittografato con successo!",
    "statusPasswordRequired": "Si prega di inserire una password",
    "statusMessageRequired": "Si prega di inserire un messaggio",
    "passwordHint": "Utilizza una password con lettere e numeri per una sicurezza ottimale"
  },
  "pt": {
    "appTitle": "ARISTIDES_MENS",
    "modalTitle": "Como usar este software",
    "modalText": "Para usar este software, comece inserindo uma senha secreta para compartilhar com seu destinatário. Em seguida, insira a mensagem a ser criptografada, copie a mensagem criptografada e envie-a com a senha para que seu destinatário possa descriptografá-la.",
    "dontShowLabel": "Não mostrar esta mensagem novamente",
    "modalOk": "Entendido",
    "passwordLabel": "Senha secreta",
    "passwordPlaceholder": "Digite sua senha aqui",
    "continueBtn": "Continuar para criptografia",
    "messageLabel": "Mensagem para criptografar/descriptografar",
    "messagePlaceholder": "Digite sua mensagem aqui",
    "resultLabel": "Resultado",
    "copyLabel": "Copiar resultado",
    "encodeLabel": "Criptografar",
    "decodeLabel": "Descriptografar",
    "backLabel": "Voltar à senha",
    "statusCopied": "Texto copiado com sucesso!",
    "statusEncoded": "Mensagem criptografada com sucesso!",
    "statusDecoded": "Mensagem descriptografada com sucesso!",
    "statusPasswordRequired": "Por favor, insira uma senha",
    "statusMessageRequired": "Por favor, digite uma mensagem",
    "passwordHint": "Use uma senha com letras e números para segurança ideal"
  },
  "ru": {
    "appTitle": "ARISTIDES_MENS",
    "modalTitle": "Как использовать это программное обеспечение",
    "modalText": "Чтобы использовать это программное обеспечение, начните с ввода секретного пароля, которым вы поделитесь с получателем. Затем введите сообщение для шифрования, скопируйте зашифрованное сообщение и отправьте его с паролем, чтобы получатель мог его расшифровать.",
    "dontShowLabel": "Не показывать это сообщение снова",
    "modalOk": "Понятно",
    "passwordLabel": "Секретный пароль",
    "passwordPlaceholder": "Введите ваш пароль здесь",
    "continueBtn": "Перейти к шифрованию",
    "messageLabel": "Сообщение для шифрования/дешифрования",
    "messagePlaceholder": "Введите ваше сообщение здесь",
    "resultLabel": "Результат",
    "copyLabel": "Копировать результат",
    "encodeLabel": "Зашифровать",
    "decodeLabel": "Расшифровать",
    "backLabel": "Вернуться к паролю",
    "statusCopied": "Текст успешно скопирован!",
    "statusEncoded": "Сообщение успешно зашифровано!",
    "statusDecoded": "Сообщение успешно расшифровано!",
    "statusPasswordRequired": "Пожалуйста, введите пароль",
    "statusMessageRequired": "Пожалуйста, введите сообщение",
    "passwordHint": "Используйте пароль с буквами и цифрами для оптимальной безопасности"
  },
  "zh": {
    "appTitle": "ARISTIDES_MENS",
    "modalTitle": "如何使用此软件",
    "modalText": "要使用此软件，请首先输入要与收件人共享的密码。然后输入要加密的消息，复制加密的消息，并将其与密码一起发送，以便收件人可以解密它。",
    "dontShowLabel": "不再显示此消息",
    "modalOk": "知道了",
    "passwordLabel": "秘密密码",
    "passwordPlaceholder": "在此输入您的密码",
    "continueBtn": "继续加密",
    "messageLabel": "要加密/解密的消息",
    "messagePlaceholder": "在此输入您的消息",
    "resultLabel": "结果",
    "copyLabel": "复制结果",
    "encodeLabel": "加密",
    "decodeLabel": "解密",
    "backLabel": "返回密码",
    "statusCopied": "文本复制成功！",
    "statusEncoded": "消息加密成功！",
    "statusDecoded": "消息解密成功！",
    "statusPasswordRequired": "请输入密码",
    "statusMessageRequired": "请输入消息",
    "passwordHint": "使用带字母和数字的密码以获得最佳安全性"
  },
  "ja": {
    "appTitle": "ARISTIDES_MENS",
    "modalTitle": "ソフトウェアの使用方法",
    "modalText": "このソフトウェアを使用するには、まず受信者と共有する秘密のパスワードを入力します。次に、暗号化するメッセージを入力し、暗号化されたメッセージをコピーして、受信者が復号できるようにパスワードと一緒に送信します。",
    "dontShowLabel": "このメッセージを再表示しない",
    "modalOk": "了解しました",
    "passwordLabel": "秘密のパスワード",
    "passwordPlaceholder": "ここにパスワードを入力してください",
    "continueBtn": "暗号化に進む",
    "messageLabel": "暗号化/復号するメッセージ",
    "messagePlaceholder": "ここにメッセージを入力してください",
    "resultLabel": "結果",
    "copyLabel": "結果をコピー",
    "encodeLabel": "暗号化",
    "decodeLabel": "復号",
    "backLabel": "パスワードに戻る",
    "statusCopied": "テキストが正常にコピーされました！",
    "statusEncoded": "メッセージが正常に暗号化されました！",
    "statusDecoded": "メッセージが正常に復号されました！",
    "statusPasswordRequired": "パスワードを入力してください",
    "statusMessageRequired": "メッセージを入力してください",
    "passwordHint": "最適なセキュリティのために文字と数字を含むパスワードを使用してください"
  },
  "ar": {
    "appTitle": "ARISTIDES_MENS",
    "modalTitle": "كيفية استخدام هذا البرنامج",
    "modalText": "لاستخدام هذا البرنامج، ابدأ بإدخال كلمة مرور سرية لمشاركتها مع المستلم. ثم أدخل الرسالة المراد تشفيرها، وانسخ الرسالة المشفرة، وأرسلها مع كلمة المرور حتى يتمكن المستلم من فك تشفيرها.",
    "dontShowLabel": "عدم إظهار هذه الرسالة مرة أخرى",
    "modalOk": "فهمت",
    "passwordLabel": "كلمة مرور سرية",
    "passwordPlaceholder": "أدخل كلمة المرور هنا",
    "continueBtn": "المتابعة إلى التشفير",
    "messageLabel": "رسالة للتشفير/فك التشفير",
    "messagePlaceholder": "أدخل رسالتك هنا",
    "resultLabel": "النتيجة",
    "copyLabel": "نسخ النتيجة",
    "encodeLabel": "تشفير",
    "decodeLabel": "فك التشفير",
    "backLabel": "العودة إلى كلمة المرور",
    "statusCopied": "تم نسخ النص بنجاح!",
    "statusEncoded": "تم تشفير الرسالة بنجاح!",
    "statusDecoded": "تم فك تشفير الرسالة بنجاح!",
    "statusPasswordRequired": "الرجاء إدخال كلمة مرور",
    "statusMessageRequired": "الرجاء إدخال رسالة",
    "passwordHint": "استخدم كلمة مرور تحتوي على أحرف وأرقام لأفضل أمان"
  }
};

// Updated language list with native names and sorted alphabetically
const googleTranslateLanguages = [
    {"code":"af","name":"Afrikaans"},
    {"code":"sq","name":"Shqip"},
    {"code":"am","name":"አማርኛ"},
    {"code":"ar","name":"العربية"},
    {"code":"hy","name":"Հայերեն"},
    {"code":"az","name":"Azərbaycanca"},
    {"code":"eu","name":"Euskara"},
    {"code":"be","name":"Беларуская"},
    {"code":"bn","name":"বাংলা"},
    {"code":"bs","name":"Bosanski"},
    {"code":"bg","name":"Български"},
    {"code":"ca","name":"Català"},
    {"code":"ceb","name":"Cebuano"},
    {"code":"ny","name":"Chichewa"},
    {"code":"zh-CN","name":"中文 (简体)"},
    {"code":"zh-TW","name":"中文 (繁體)"},
    {"code":"co","name":"Corsu"},
    {"code":"hr","name":"Hrvatski"},
    {"code":"cs","name":"Čeština"},
    {"code":"da","name":"Dansk"},
    {"code":"nl","name":"Nederlands"},
    {"code":"en","name":"English"},
    {"code":"eo","name":"Esperanto"},
    {"code":"et","name":"Eesti"},
    {"code":"tl","name":"Filipino"},
    {"code":"fi","name":"Suomi"},
    {"code":"fr","name":"Français"},
    {"code":"fy","name":"Frysk"},
    {"code":"gl","name":"Galego"},
    {"code":"ka","name":"ქართული"},
    {"code":"de","name":"Deutsch"},
    {"code":"el","name":"Ελληνικά"},
    {"code":"gu","name":"ગુજરાતી"},
    {"code":"ht","name":"Kreyòl Ayisyen"},
    {"code":"ha","name":"Hausa"},
    {"code":"haw","name":"Hawaiʻi"},
    {"code":"iw","name":"עברית"},
    {"code":"hi","name":"हिन्दी"},
    {"code":"hmn","name":"Hmong"},
    {"code":"hu","name":"Magyar"},
    {"code":"is","name":"Íslenska"},
    {"code":"ig","name":"Igbo"},
    {"code":"id","name":"Bahasa Indonesia"},
    {"code":"ga","name":"Gaeilge"},
    {"code":"it","name":"Italiano"},
    {"code":"ja","name":"日本語"},
    {"code":"jw","name":"Jawa"},
    {"code":"kn","name":"ಕನ್ನಡ"},
    {"code":"kk","name":"Қазақ"},
    {"code":"km","name":"ខ្មែរ"},
    {"code":"rw","name":"Kinyarwanda"},
    {"code":"ko","name":"한국어"},
    {"code":"ku","name":"Kurdî (Kurmanjî)"},
    {"code":"ky","name":"Кыргызча"},
    {"code":"lo","name":"ລາວ"},
    {"code":"la","name":"Latina"},
    {"code":"lv","name":"Latviešu"},
    {"code":"lt","name":"Lietuvių"},
    {"code":"lb","name":"Lëtzebuergesch"},
    {"code":"mk","name":"Македонски"},
    {"code":"mg","name":"Malagasy"},
    {"code":"ms","name":"Bahasa Melayu"},
    {"code":"ml","name":"മലയാളം"},
    {"code":"mt","name":"Malti"},
    {"code":"mi","name":"Māori"},
    {"code":"mr","name":"मराठी"},
    {"code":"mn","name":"Монгол"},
    {"code":"my","name":"မြန်မာဘာသာ"},
    {"code":"ne","name":"नेपाली"},
    {"code":"no","name":"Norsk"},
    {"code":"or","name":"ଓଡ଼ିଆ"},
    {"code":"ps","name":"پښتو"},
    {"code":"fa","name":"فارسی"},
    {"code":"pl","name":"Polski"},
    {"code":"pt","name":"Português"},
    {"code":"pa","name":"ਪੰਜਾਬੀ"},
    {"code":"ro","name":"Română"},
    {"code":"ru","name":"Русский"},
    {"code":"sm","name":"Gagana Samoa"},
    {"code":"gd","name":"Gàidhlig"},
    {"code":"sr","name":"Српски"},
    {"code":"st","name":"Sesotho"},
    {"code":"sn","name":"Shona"},
    {"code":"sd","name":"سنڌي"},
    {"code":"si","name":"සිංහල"},
    {"code":"sk","name":"Slovenčina"},
    {"code":"sl","name":"Slovenščina"},
    {"code":"so","name":"Soomaali"},
    {"code":"es","name":"Español"},
    {"code":"su","name":"Basa Sunda"},
    {"code":"sw","name":"Kiswahili"},
    {"code":"sv","name":"Svenska"},
    {"code":"tg","name":"Тоҷикӣ"},
    {"code":"ta","name":"தமிழ்"},
    {"code":"tt","name":"Татар"},
    {"code":"te","name":"తెలుగు"},
    {"code":"th","name":"ไทย"},
    {"code":"tr","name":"Türkçe"},
    {"code":"tk","name":"Türkmen"},
    {"code":"uk","name":"Українська"},
    {"code":"ur","name":"اردو"},
    {"code":"ug","name":"ئۇيغۇرچە"},
    {"code":"uz","name":"Oʻzbek"},
    {"code":"vi","name":"Tiếng Việt"},
    {"code":"cy","name":"Cymraeg"},
    {"code":"xh","name":"isiXhosa"},
    {"code":"yi","name":"ייִדיש"},
    {"code":"yo","name":"Yorùbá"},
    {"code":"zu","name":"isiZulu"}
];

// Sort the languages alphabetically by their native names
googleTranslateLanguages.sort((a, b) => a.name.localeCompare(b.name));

// Updated language database with numbers and their symbols
const languageDataBase = {
  "en": {
    "alphabet": "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",
    "symbolMap": {
      "A":"+","B":"#","C":"°","D":"√","E":"\\","F":"™","G":"]","H":"÷","I":"π","J":"{","K":"&","L":"^","M":"§","N":"¥","O":"∆","P":"£","Q":"¢","R":"%","S":"~","T":"©","U":"-","V":"•","W":"€","X":"®","Y":"✓","Z":"|",
      "0":"①","1":"②","2":"③","3":"④","4":"⑤","5":"⑥","6":"⑦","7":"⑧","8":"⑨","9":"⑩"
    }
  },
  "fr": {
    "alphabet": "ABCDEFGHIJKLMNOPQRSTUVWXYZÀÂÄÇÉÈÊËÎÏÔÖÙÛÜŸÆŒ0123456789",
    "symbolMap": {
      "A":"+","B":"#","C":"°","D":"√","E":"\\","F":"™","G":"]","H":"÷","I":"π","J":"{","K":"&","L":"^","M":"§","N":"¥","O":"∆","P":"£","Q":"¢","R":"%","S":"~","T":"©","U":"-","V":"•","W":"€","X":"®","Y":"✓","Z":"|",
      "À":"α","Â":"β","Ä":"γ","Ç":"δ","É":"ε","È":"ζ","Ê":"η","Ë":"θ","Î":"ι","Ï":"κ","Ô":"λ","Ö":"μ","Ù":"ν","Û":"ξ","Ü":"ο","Ÿ":"π","Æ":"ρ","Œ":"σ",
      "0":"⓪","1":"❶","2":"❷","3":"❸","4":"❹","5":"❺","6":"❻","7":"❼","8":"❽","9":"❾"
    }
  },
  "es": {
    "alphabet": "ABCDEFGHIJKLMNOPQRSTUVWXYZÑÁÉÍÓÚÜ0123456789",
    "symbolMap": {
      "A":"+","B":"#","C":"°","D":"√","E":"\\","F":"™","G":"]","H":"÷","I":"π","J":"{","K":"&","L":"^","M":"§","N":"¥","O":"∆","P":"£","Q":"¢","R":"%","S":"~","T":"©","U":"-","V":"•","W":"€","X":"®","Y":"✓","Z":"|",
      "Ñ":"α","Á":"β","É":"γ","Í":"δ","Ó":"ε","Ú":"ζ","Ü":"η",
      "0":"①","1":"②","2":"③","3":"④","4":"⑤","5":"⑥","6":"⑦","7":"⑧","8":"⑨","9":"⑩"
    }
  },
  "de": {
    "alphabet": "ABCDEFGHIJKLMNOPQRSTUVWXYZÄÖÜẞ0123456789",
    "symbolMap": {
      "A":"+","B":"#","C":"°","D":"√","E":"\\","F":"™","G":"]","H":"÷","I":"π","J":"{","K":"&","L":"^","M":"§","N":"¥","O":"∆","P":"£","Q":"¢","R":"%","S":"~","T":"©","U":"-","V":"•","W":"€","X":"®","Y":"✓","Z":"|",
      "Ä":"α","Ö":"β","Ü":"γ","ẞ":"δ",
      "0":"①","1":"②","2":"③","3":"④","4":"⑤","5":"⑥","6":"⑦","7":"⑧","8":"⑨","9":"⑩"
    }
  },
  "it": {
    "alphabet": "ABCDEFGHIJKLMNOPQRSTUVWXYZÀÈÉÌÍÎÓÒÙ0123456789",
    "symbolMap": {
      "A":"+","B":"#","C":"°","D":"√","E":"\\","F":"™","G":"]","H":"÷","I":"π","J":"{","K":"&","L":"^","M":"§","N":"¥","O":"∆","P":"£","Q":"¢","R":"%","S":"~","T":"©","U":"-","V":"•","W":"€","X":"®","Y":"✓","Z":"|",
      "À":"α","È":"β","É":"γ","Ì":"δ","Í":"ε","Î":"ζ","Ó":"η","Ò":"θ","Ù":"ι",
      "0":"①","1":"②","2":"③","3":"④","4":"⑤","5":"⑥","6":"⑦","7":"⑧","8":"⑨","9":"⑩"
    }
  },
  "pt": {
    "alphabet": "ABCDEFGHIJKLMNOPQRSTUVWXYZÇÁÀÂãÉÊÍÓÔÕÚ0123456789",
    "symbolMap": {
      "A":"+","B":"#","C":"°","D":"√","E":"\\","F":"™","G":"]","H":"÷","I":"π","J":"{","K":"&","L":"^","M":"§","N":"¥","O":"∆","P":"£","Q":"¢","R":"%","S":"~","T":"©","U":"-","V":"•","W":"€","X":"®","Y":"✓","Z":"|",
      "Ç":"α","Á":"β","À":"γ","Â":"δ","ã":"ε","É":"ζ","Ê":"η","Í":"θ","Ó":"ι","Ô":"κ","Õ":"λ","Ú":"μ",
      "0":"①","1":"②","2":"③","3":"④","4":"⑤","5":"⑥","6":"⑦","7":"⑧","8":"⑨","9":"⑩"
    }
  },
  "ru": {
    "alphabet": "АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ0123456789",
    "symbolMap": {
      "А":"+","Б":"#","В":"°","Г":"√","Д":"\\","Е":"™","Ё":"]","Ж":"÷","З":"π","И":"{","Й":"&","К":"^","Л":"§","М":"¥","Н":"∆","О":"£","П":"¢","Р":"%","С":"~","Т":"©","У":"-","Ф":"•","Х":"€","Ц":"®","Ч":"✓","Ш":"|",
      "Щ":"α","Ъ":"β","Ы":"γ","Ь":"δ","Э":"ε","Ю":"ζ","Я":"η",
      "0":"①","1":"②","2":"③","3":"④","4":"⑤","5":"⑥","6":"⑦","7":"⑧","8":"⑨","9":"⑩"
    }
  },
  "zh": {
    "alphabet": "ABCDEFGHIJKLMNOPQRSTUVWXYZĀÁǍÀĒÉĚÈĪÍǏÌŌÓǑÒŪÚǓÙǕǗǙǛ0123456789",
    "symbolMap": {
      "A":"+","B":"#","C":"°","D":"√","E":"\\","F":"™","G":"]","H":"÷","I":"π","J":"{","K":"&","L":"^","M":"§","N":"¥","O":"∆","P":"£","Q":"¢","R":"%","S":"~","T":"©","U":"-","V":"•","W":"€","X":"®","Y":"✓","Z":"|",
      "Ā":"α","Á":"β","Ǎ":"γ","À":"δ","Ē":"ε","É":"ζ","Ě":"η","È":"θ","Ī":"ι","Í":"κ","Ǐ":"λ","Ì":"μ","Ō":"ν","Ó":"ξ","Ǒ":"ο","Ò":"π","Ū":"ρ","Ú":"σ","Ǔ":"τ","Ù":"υ","Ǖ":"φ","Ǘ":"χ","Ǚ":"ψ","Ǜ":"ω",
      "0":"①","1":"②","2":"③","3":"④","4":"⑤","5":"⑥","6":"⑦","7":"⑧","8":"⑨","9":"⑩"
    }
  },
  "ja": {
    "alphabet": "ABCDEFGHIJKLMNOPQRSTUVWXYZĀĒĪŌŪ0123456789",
    "symbolMap": {
      "A":"+","B":"#","C":"°","D":"√","E":"\\","F":"™","G":"]","H":"÷","I":"π","J":"{","K":"&","L":"^","M":"§","N":"¥","O":"∆","P":"£","Q":"¢","R":"%","S":"~","T":"©","U":"-","V":"•","W":"€","X":"®","Y":"✓","Z":"|",
      "Ā":"α","Ē":"β","Ī":"γ","Ō":"δ","Ū":"ε",
      "0":"①","1":"②","2":"③","3":"④","4":"⑤","5":"⑥","6":"⑦","7":"⑧","8":"⑨","9":"⑩"
    }
  },
  "ar": {
    "alphabet": "ابتثجحخدذرزسشصضطظعغفقكلمنهوي0123456789",
    "symbolMap": {
      "ا":"+","ب":"#","ت":"°","ث":"√","ج":"\\","ح":"™","خ":"]","د":"÷","ذ":"π","ر":"{","ز":"&","س":"^","ش":"§","ص":"¥","ض":"∆","ط":"£","ظ":"¢","ع":"%","غ":"~","ف":"©","ق":"-","ك":"•","ل":"€","م":"®","ن":"✓","ه":"|",
      "و":"α","ي":"β",
      "0":"①","1":"②","2":"③","3":"④","4":"⑤","5":"⑥","6":"⑦","7":"⑧","8":"⑨","9":"⑩"
    }
  }
};

let currentPassword = '';
let currentLang = 'fr';

// Mathematical functions
function gcd(a, b) {
    if (b === 0) return Math.abs(a);
    return gcd(b, a % b);
}

function getCoprimes(m) {
    const c = [];
    for (let i = 1; i < m; i++) {
        if (gcd(i, m) === 1) c.push(i);
    }
    return c;
}

function modInverse(a, mod) {
    a = ((a % mod) + mod) % mod;
    for (let x = 1; x < mod; x++) {
        if ((a * x) % mod === 1) return x;
    }
    return 1;
}

// Expand language data to include lowercase letters
function expandLanguageData() {
    for (const k of Object.keys(languageDataBase)) {
        const data = languageDataBase[k];
        if (data.__expanded) continue;
        
        const upper = Array.from(data.alphabet);
        let lower = upper.map(ch => {
            try { 
                // Don't lowercase numbers
                if (/[0-9]/.test(ch)) return ch;
                return ch.toLowerCase(); 
            } 
            catch(e) { return ch; }
        });
        
        if (lower.join('') === upper.join('')) lower = upper.slice();
        
        data.alphabet = upper.join('') + lower.join('');
        
        if (!data.symbolMap) data.symbolMap = {};
        
        const lowerSymbols = generateSymbolPool();
        for (let i = 0; i < lower.length; i++) {
            const low = lower[i];
            if (data.symbolMap[low]) continue;
            
            // Don't create new symbols for numbers
            if (/[0-9]/.test(low)) continue;
            
            const up = upper[i % upper.length];
            let candidate = lowerSymbols[i % lowerSymbols.length];
            
            if (candidate === data.symbolMap[up]) {
                candidate = lowerSymbols[(i + 1) % lowerSymbols.length];
            }
            
            data.symbolMap[low] = candidate;
        }
        data.__expanded = true;
    }
}

function generateSymbolPool() {
    const pool = [];
    for (let cp = 0x2800; cp <= 0x28FF; cp++) {
        pool.push(String.fromCharCode(cp));
    }
    const extras = ['✦', '✧', '✪', '✫', '✬', '✭', '✮', '✯', '★', '☆', '☉', '☼', '☀', '☁', '♫', '♪', '☾', '☽', '✶', '✷'];
    for (const e of extras) pool.push(e);
    return pool;
}

function dynamicAlphabetForLanguage(code) {
    expandLanguageData();
    const base = languageDataBase[code];
    if (base) return base.alphabet.split('');
    
    // Fallback: generate basic alphabet with numbers
    const basicAlphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
    return basicAlphabet.split('');
}

function buildLanguageMapping(code) {
    const alphabetArr = dynamicAlphabetForLanguage(code);
    const symbolMap = {};
    
    for (let i = 0; i < alphabetArr.length; i++) {
        const ch = alphabetArr[i];
        if (languageDataBase[code] && languageDataBase[code].symbolMap && languageDataBase[code].symbolMap[ch]) {
            symbolMap[ch] = languageDataBase[code].symbolMap[ch];
            continue;
        }
        // Fallback symbol generation - but don't override numbers
        if (!/[0-9]/.test(ch)) {
            symbolMap[ch] = generateSymbolForIndex(i);
        }
    }
    
    return { alphabet: alphabetArr, symbolMap };
}

function generateSymbolForIndex(i) {
    const pool = generateSymbolPool();
    const p = pool.length;
    const q = Math.floor(i / p);
    const r = i % p;
    return (q === 0) ? pool[r] : (pool[r] + q.toString(36));
}

function calculateAB(password, alphabetSize) {
    let firstLetterValue = 3;
    let total = 0;
    let hasLetters = false;
    const alphabetArr = dynamicAlphabetForLanguage(currentLang);
    
    for (const ch of password) {
        // First, check if it's a number character
        if (/[0-9]/.test(ch)) {
            const numValue = parseInt(ch, 10);
            total += numValue;
            // For numbers, we still need to set firstLetterValue if no letters found yet
            if (!hasLetters) {
                firstLetterValue = numValue % alphabetSize;
            }
            continue;
        }
        
        // Then check for letters in the alphabet
        let idx = alphabetArr.indexOf(ch);
        if (idx !== -1) {
            if (!hasLetters) {
                firstLetterValue = idx;
                hasLetters = true;
            }
            total += idx;
            continue;
        }
        
        // Try uppercase/lowercase for letters only
        const up = alphabetArr.indexOf(ch.toUpperCase());
        const low = alphabetArr.indexOf(ch.toLowerCase());
        
        if (up !== -1) {
            if (!hasLetters) {
                firstLetterValue = up;
                hasLetters = true;
            }
            total += up;
            continue;
        }
        
        if (low !== -1) {
            if (!hasLetters) {
                firstLetterValue = low;
                hasLetters = true;
            }
            total += low;
            continue;
        }
        
        // Handle other characters
        total += ch.charCodeAt(0) % alphabetSize;
    }
    
    const coprimes = getCoprimes(alphabetSize);
    if (coprimes.length === 0) return { a: 1, b: total % alphabetSize };
    
    // Ensure firstLetterValue is within bounds
    firstLetterValue = firstLetterValue % coprimes.length;
    const a = coprimes[firstLetterValue];
    const b = total % alphabetSize;
    
    return { a, b };
}

function encode(text, password) {
    const mapping = buildLanguageMapping(currentLang);
    const alphabetArr = mapping.alphabet;
    const alphabetSize = alphabetArr.length;
    const { a, b } = calculateAB(password, alphabetSize);
    
    let result = '';
    const symbolMap = mapping.symbolMap;
    
    for (const ch of text) {
        let index = alphabetArr.indexOf(ch);
        if (index === -1) {
            // For letters, try case variations
            if (!/[0-9]/.test(ch)) {
                const up = alphabetArr.indexOf(ch.toUpperCase());
                const low = alphabetArr.indexOf(ch.toLowerCase());
                index = (up !== -1 ? up : (low !== -1 ? low : -1));
            }
        }
        
        if (index !== -1) {
            const x = index;
            const y = (a * x + b) % alphabetSize;
            const codedLetter = alphabetArr[y];
            const sym = symbolMap[codedLetter];
            result += (sym !== undefined && sym !== null) ? sym : codedLetter;
        } else {
            result += ch;
        }
    }
    
    return result;
}

function decode(text, password) {
    const mapping = buildLanguageMapping(currentLang);
    const alphabetArr = mapping.alphabet;
    const alphabetSize = alphabetArr.length;
    const { a, b } = calculateAB(password, alphabetSize);
    const aInv = modInverse(a, alphabetSize);
    
    // Build a more robust reverse symbol map
    const reverseSymbolMap = {};
    for (const [k, v] of Object.entries(mapping.symbolMap)) {
        // Ensure numbers get their correct reverse mapping
        reverseSymbolMap[v] = k;
    }
    
    let result = '';
    let i = 0;
    while (i < text.length) {
        const ch = text[i];
        let decodedChar = ch;
        let found = false;
        
        // Check single character symbols first
        if (reverseSymbolMap[ch]) {
            const codedLetter = reverseSymbolMap[ch];
            const y = alphabetArr.indexOf(codedLetter);
            if (y !== -1) {
                let x = (aInv * (y - b)) % alphabetSize;
                if (x < 0) x += alphabetSize;
                decodedChar = alphabetArr[x];
                found = true;
            }
        }
        
        // If not found, check multi-character symbols
        if (!found) {
            for (let len = 2; len <= 4 && i + len <= text.length; len++) {
                const multiChar = text.substring(i, i + len);
                if (reverseSymbolMap[multiChar]) {
                    const codedLetter = reverseSymbolMap[multiChar];
                    const y = alphabetArr.indexOf(codedLetter);
                    if (y !== -1) {
                        let x = (aInv * (y - b)) % alphabetSize;
                        if (x < 0) x += alphabetSize;
                        decodedChar = alphabetArr[x];
                        found = true;
                        i += (len - 1); // Skip the extra characters we consumed
                        break;
                    }
                }
            }
        }
        
        result += decodedChar;
        i++;
    }
    
    return result;
}

function applyTranslations(lang) {
    currentLang = lang;
    const t = translations[lang] || translations['en'];
    
    // Update app title
    document.getElementById('appTitle').textContent = t.appTitle;
    
    // Update modal content
    document.getElementById('modalTitle').textContent = t.modalTitle;
    document.getElementById('modalText').textContent = t.modalText;
    document.getElementById('dontShowLabel').textContent = t.dontShowLabel;
    document.getElementById('modalOk').textContent = t.modalOk;
    
    // Update main app content
    document.getElementById('passwordLabel').textContent = t.passwordLabel;
    document.getElementById('password').placeholder = t.passwordPlaceholder;
    document.getElementById('continueBtn').innerHTML = t.continueBtn;
    document.getElementById('messageLabel').textContent = t.messageLabel;
    document.getElementById('message').placeholder = t.messagePlaceholder;
    document.getElementById('resultLabel').textContent = t.resultLabel;
    document.getElementById('copyLabel').textContent = t.copyLabel;
    document.getElementById('encodeLabel').textContent = t.encodeLabel;
    document.getElementById('decodeLabel').textContent = t.decodeLabel;
    document.getElementById('backLabel').textContent = t.backLabel;
    document.getElementById('passwordHint').textContent = t.passwordHint;
}

function populateLanguageSelectors() {
    const headerSel = document.getElementById('langSelect');
    const modalSel = document.getElementById('modalLangSelect');
    headerSel.innerHTML = '';
    modalSel.innerHTML = '';
    
    for (const item of googleTranslateLanguages) {
        const opt1 = document.createElement('option');
        opt1.value = item.code;
        opt1.textContent = item.name;
        headerSel.appendChild(opt1);
        
        const opt2 = document.createElement('option');
        opt2.value = item.code;
        opt2.textContent = item.name;
        modalSel.appendChild(opt2);
    }
    
    if ([...headerSel.options].some(o => o.value === currentLang) === false) currentLang = 'fr';
    headerSel.value = currentLang;
    modalSel.value = currentLang;
    
    headerSel.addEventListener('change', function() {
        const lang = this.value;
        modalSel.value = lang;
        applyTranslations(lang);
    });
    
    modalSel.addEventListener('change', function() {
        const lang = this.value;
        headerSel.value = lang;
        applyTranslations(lang);
    });
}

function checkPasswordStrength(password) {
    let strength = 0;
    if (password.length > 0) strength += 20;
    if (password.length > 5) strength += 20;
    if (/[a-zA-Z]/.test(password)) strength += 20;
    if (/[0-9]/.test(password)) strength += 20;
    if (/[^a-zA-Z0-9]/.test(password)) strength += 20;
    document.getElementById('passwordStrength').style.width = strength + '%';
}

function showStatus(message, type) {
    const statusEl = document.getElementById('status');
    statusEl.textContent = message;
    statusEl.className = 'status ' + type;
    setTimeout(() => {
        statusEl.textContent = '';
        statusEl.className = 'status';
    }, 3000);
}

document.addEventListener('DOMContentLoaded', function() {
    populateLanguageSelectors();
    
    if (localStorage.getItem('hidePrompt') !== 'true') {
        document.getElementById('instructionModal').style.display = 'flex';
    }
    
    document.getElementById('password').value = '';
    document.getElementById('message').value = '';
    document.getElementById('result').innerText = '';
    
    document.getElementById('password').addEventListener('input', function() {
        checkPasswordStrength(this.value);
    });
    
    applyTranslations(currentLang);
    
    document.getElementById('modalOk').addEventListener('click', function() {
        if (document.getElementById('dontShowAgain').checked) {
            localStorage.setItem('hidePrompt', 'true');
        }
        document.getElementById('instructionModal').style.display = 'none';
    });
    
    document.getElementById('continueBtn').addEventListener('click', function() {
        const password = document.getElementById('password').value;
        const t = translations[currentLang] || translations['en'];
        
        if (!password) {
            showStatus(t.statusPasswordRequired, 'error');
            return;
        }
        
        currentPassword = password;
        document.getElementById('page1').classList.add('hidden');
        document.getElementById('page2').classList.remove('hidden');
        document.getElementById('message').focus();
    });
    
    document.getElementById('backBtn').addEventListener('click', function() {
        document.getElementById('page2').classList.add('hidden');
        document.getElementById('page1').classList.remove('hidden');
        document.getElementById('password').value = '';
        document.getElementById('message').value = '';
        document.getElementById('result').innerText = '';
        document.getElementById('status').innerText = '';
        document.getElementById('passwordStrength').style.width = '0%';
        currentPassword = '';
    });
    
    document.getElementById('copyBtn').addEventListener('click', function() {
        const result = document.getElementById('result').innerText;
        const t = translations[currentLang] || translations['en'];
        
        if (!result) return;
        
        const textArea = document.createElement('textarea');
        textArea.value = result;
        document.body.appendChild(textArea);
        textArea.select();
        
        try {
            const successful = document.execCommand('copy');
            if (successful) showStatus(t.statusCopied, 'success');
            else showStatus(t.statusCopied, 'error');
        } catch(err) {
            showStatus(t.statusCopied + ' ' + err, 'error');
        }
        
        document.body.removeChild(textArea);
    });
    
    document.getElementById('encodeBtn').addEventListener('click', function() {
        const message = document.getElementById('message').value;
        const t = translations[currentLang] || translations['en'];
        
        if (!message) {
            showStatus(t.statusMessageRequired, 'error');
            return;
        }
        
        try {
            const encoded = encode(message, currentPassword);
            document.getElementById('result').innerText = encoded;
            showStatus(t.statusEncoded, 'success');
        } catch(err) {
            showStatus('Erreur de cryptage: ' + (err.message || err), 'error');
        }
    });
    
    document.getElementById('decodeBtn').addEventListener('click', function() {
        const message = document.getElementById('message').value;
        const t = translations[currentLang] || translations['en'];
        
        if (!message) {
            showStatus(t.statusMessageRequired, 'error');
            return;
        }
        
        try {
            const decoded = decode(message, currentPassword);
            document.getElementById('result').innerText = decoded;
            showStatus(t.statusDecoded, 'success');
        } catch(err) {
            showStatus('Erreur de décryptage: ' + (err.message || err), 'error');
        }
    });
});
</script>
</body>
</html>
